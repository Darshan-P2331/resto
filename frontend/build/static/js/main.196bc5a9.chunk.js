(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{46:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var c=a(1),s=a.n(c),r=a(24),n=a.n(r),i=(a(46),a(5)),o=a(4),j=a.n(o),l=a(7),u=a(2),b=a(6),d=a.n(b);var O=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(!1),n=Object(u.a)(r,2),i=n[0],o=n[1],b=Object(c.useState)(""),O=Object(u.a)(b,2),h=O[0],p=O[1],x=Object(c.useState)(""),m=Object(u.a)(x,2),f=m[0],v=m[1],g=Object(c.useState)(""),N=Object(u.a)(g,2),y=N[0],w=N[1],k=Object(c.useState)(1),A=Object(u.a)(k,2),_=A[0],C=A[1],S=Object(c.useState)(0),P=Object(u.a)(S,2),I=P[0],E=P[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/products?limit=".concat(9*_,"&").concat(h,"&").concat(f,"&title[regex]=").concat(y));case 2:t=e.sent,s(t.data.products),E(t.data.result);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[i,h,f,y,_]),{products:[a,s],callback:[i,o],category:[h,p],sort:[f,v],search:[y,w],page:[_,C],result:[I,E]}},h=a(3),p=a(15);var x=function(e){var t=Object(c.useState)(!1),a=Object(u.a)(t,2),s=a[0],r=a[1],n=Object(c.useState)(!1),i=Object(u.a)(n,2),o=i[0],b=i[1],O=Object(c.useState)([]),x=Object(u.a)(O,2),m=x[0],f=x[1],v=Object(c.useState)([]),g=Object(u.a)(v,2),N=g[0],y=g[1],w=Object(c.useState)({}),k=Object(u.a)(w,2),A=k[0],_=k[1],C=Object(c.useState)([]),S=Object(u.a)(C,2),P=S[0],I=S[1],E=Object(c.useState)(!1),D=Object(u.a)(E,2),z=D[0],F=D[1];Object(c.useEffect)((function(){if(e){var t=function(){var t=Object(l.a)(j.a.mark((function t(){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.get("/user/info",{headers:{Authorization:e}});case 3:a=t.sent,r(!0),1===a.data.role?b(!0):b(!1),_(a.data),f(a.data.cart),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),alert(t.t0.response.data.msg);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();t()}}),[e]);var q=function(){var t=Object(l.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s){t.next=2;break}return t.abrupt("return",alert("Please login to continue buying"));case 2:if(!m.every((function(e){return e._id!==a._id}))){t.next=9;break}return f([].concat(Object(p.a)(m),[Object(h.a)(Object(h.a)({},a),{},{quantity:1})])),t.next=7,d.a.patch("/user/addcart",{cart:[].concat(Object(p.a)(m),[Object(h.a)(Object(h.a)({},a),{},{quantity:1})])},{headers:{Authorization:e}});case 7:t.next=10;break;case 9:alert("This product has been added to cart.");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{isLogged:[s,r],isAdmin:[o,b],cart:[m,f],addCart:q,user:[A,_],users:[N,y],history:[P,I],callback:[z,F]}};var m=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(!1),n=Object(u.a)(r,2),i=n[0],o=n[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/category");case 2:t=e.sent,s(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[i]),{categories:[a,s],callback:[i,o]}},f=a(0),v=Object(c.createContext)(),g=function(e){var t=e.children,a=Object(c.useState)(!1),s=Object(u.a)(a,2),r=s[0],n=s[1];Object(c.useEffect)((function(){if(localStorage.getItem("firstLogin")){var e=function(){var t=Object(l.a)(j.a.mark((function t(){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.post("/user/refresh_token");case 2:a=t.sent,n(a.data.access_token),setTimeout((function(){e()}),6e5);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e()}}),[]),O();var i={token:[r,n],productsAPI:O(),userAPI:x(r),categoriesAPI:m()};return Object(f.jsx)(v.Provider,{value:i,children:t})};function N(){var e=Object(c.useContext)(v),t=Object(u.a)(e.userAPI.isLogged,1)[0],a=Object(u.a)(e.userAPI.isAdmin,1)[0],s=Object(u.a)(e.userAPI.cart,1)[0],r=Object(u.a)(e.productsAPI.search,2),n=r[0],o=r[1],b=Object(c.useState)(!1),O=Object(u.a)(b,2),h=O[0],p=O[1],x=Object(c.useState)(!1),m=Object(u.a)(x,2),g=m[0],N=m[1],y=function(){var e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/user/logout");case 2:localStorage.removeItem("firstLogin"),window.location.href="/";case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){return p(!h)};return Object(f.jsxs)("header",{className:"header",children:[Object(f.jsxs)(i.b,{to:"/",className:"logo",children:[" ",Object(f.jsx)("i",{className:"fas fa-utensils"})," resto."," "]}),Object(f.jsxs)("nav",{className:h?"navbar active":"navbar",children:[Object(f.jsx)(i.b,{to:"/",children:"home"}),a?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(i.b,{to:"/create_product",onClick:w,children:"Create Product"}),Object(f.jsx)(i.b,{to:"/category",onClick:w,children:"Category"}),Object(f.jsx)(i.b,{to:"/allorders",onClick:w,children:"Orders"})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(i.b,{to:"#about",children:"about"}),Object(f.jsx)(i.b,{to:"/profile",children:"profile"})]})]}),Object(f.jsxs)("div",{className:"icons",children:[Object(f.jsx)("div",{id:"menu-btn",className:"fas fa-bars",onClick:w}),Object(f.jsx)(i.b,{to:"/",id:"search-btn",className:"fas fa-search",onClick:function(){return N(!g)}}),Object(f.jsx)(i.b,{to:"/cart",className:"fas fa-shopping-cart",value:s.length}),t?Object(f.jsx)(i.b,{to:"",onClick:y,id:"login-btn",className:"fas fa-sign-out-alt danger"}):Object(f.jsx)(i.b,{to:"/signin",id:"login-btn",className:"fas fa-user"})]}),Object(f.jsx)("section",{className:"search-form-container ".concat(g&&"active"),children:Object(f.jsxs)("form",{children:[Object(f.jsx)("input",{type:"search",name:"",placeholder:"search here...",value:n,onChange:function(e){return o(e.target.value.toLowerCase())}}),Object(f.jsx)("label",{htmlFor:"search-box",className:"fas fa-search"})]})})]})}function y(){return Object(f.jsxs)("section",{className:"footer",children:[Object(f.jsxs)("div",{className:"box-container",children:[Object(f.jsxs)("div",{className:"box",children:[Object(f.jsx)("h3",{children:"our menu"}),Object(f.jsxs)(i.b,{to:"#",children:[Object(f.jsx)("i",{className:"fas fa-arrow-right"})," pizza"]}),Object(f.jsxs)(i.b,{to:"#",children:[Object(f.jsx)("i",{className:"fas fa-arrow-right"})," burger"]}),Object(f.jsxs)(i.b,{to:"#",children:[Object(f.jsx)("i",{className:"fas fa-arrow-right"})," chicken"]}),Object(f.jsxs)(i.b,{to:"#",children:[Object(f.jsx)("i",{className:"fas fa-arrow-right"})," pasta"]}),Object(f.jsxs)(i.b,{to:"#",children:[Object(f.jsx)("i",{className:"fas fa-arrow-right"})," and more..."]})]}),Object(f.jsxs)("div",{className:"box",children:[Object(f.jsx)("h3",{children:"quick links"}),Object(f.jsxs)(i.b,{to:"#home",children:[" ",Object(f.jsx)("i",{className:"fas fa-arrow-right"})," home"]}),Object(f.jsxs)(i.b,{to:"#about",children:[" ",Object(f.jsx)("i",{className:"fas fa-arrow-right"})," about"]}),Object(f.jsxs)(i.b,{to:"#popular",children:[" ",Object(f.jsx)("i",{className:"fas fa-arrow-right"})," popular"]}),Object(f.jsxs)(i.b,{to:"#menu",children:[" ",Object(f.jsx)("i",{className:"fas fa-arrow-right"})," menu"]}),Object(f.jsxs)(i.b,{to:"#order",children:[" ",Object(f.jsx)("i",{className:"fas fa-arrow-right"})," order"]}),Object(f.jsxs)(i.b,{to:"#blogs",children:[" ",Object(f.jsx)("i",{className:"fas fa-arrow-right"})," blogs"]})]}),Object(f.jsxs)("div",{className:"box",children:[Object(f.jsx)("h3",{children:"extra links"}),Object(f.jsxs)(i.b,{to:"#",children:[" ",Object(f.jsx)("i",{className:"fas fa-arrow-right"})," my order"]}),Object(f.jsxs)(i.b,{to:"#",children:[" ",Object(f.jsx)("i",{className:"fas fa-arrow-right"})," my account"]}),Object(f.jsxs)(i.b,{to:"#",children:[" ",Object(f.jsx)("i",{className:"fas fa-arrow-right"})," my favorite"]}),Object(f.jsxs)(i.b,{to:"#",children:[" ",Object(f.jsx)("i",{className:"fas fa-arrow-right"})," terms of use"]}),Object(f.jsxs)(i.b,{to:"#",children:[" ",Object(f.jsx)("i",{className:"fas fa-arrow-right"})," privary policy"]})]}),Object(f.jsxs)("div",{className:"box",children:[Object(f.jsx)("h3",{children:"opening hours"}),Object(f.jsx)("p",{children:"monday : 7:00am to 10:00pm"}),Object(f.jsx)("p",{children:"tuesday : 7:00am to 10:00pm"}),Object(f.jsx)("p",{children:"wednesday : 7:00am to 10:00pm"}),Object(f.jsx)("p",{children:"friday : 7:00am to 10:00pm"}),Object(f.jsx)("p",{children:"saturday and sunday closed"})]})]}),Object(f.jsxs)("div",{className:"bottom",children:[Object(f.jsxs)("div",{className:"share",children:[Object(f.jsx)(i.b,{to:"#",className:"fab fa-facebook-f"}),Object(f.jsx)(i.b,{to:"#",className:"fab fa-twitter"}),Object(f.jsx)(i.b,{to:"#",className:"fab fa-instagram"}),Object(f.jsx)(i.b,{to:"#",className:"fab fa-linkedin"}),Object(f.jsx)(i.b,{to:"#",className:"fab fa-pinterest"})]}),Object(f.jsxs)("div",{className:"credit",children:[" ","created ",Object(f.jsx)("span",{children:"Darshan"})," | all rights reserved!"," "]})]})]})}var w=a(9);function k(e){var t=e.variant,a=e.children;return Object(f.jsx)("div",{className:"alert alert-".concat(t||"info"),children:a})}function A(){var e=Object(w.f)().activation_token,t=Object(c.useState)(""),a=Object(u.a)(t,2),s=a[0],r=a[1],n=Object(c.useState)(""),i=Object(u.a)(n,2),o=i[0],b=i[1];return Object(c.useEffect)((function(){if(e){var t=function(){var t=Object(l.a)(j.a.mark((function t(){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.post("/user/activation",{activation_token:e});case 3:a=t.sent,b(a.data.msg),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0.response.data.msg&&r(t.t0.response.data.msg);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t()}}),[e]),Object(f.jsx)("div",{className:"login-form-container active",children:Object(f.jsxs)("form",{children:[s&&Object(f.jsx)(k,{variant:"danger",children:s}),o&&Object(f.jsx)(k,{variant:"success",children:o})]})})}var _=a(8),C=function(e){return!e},S=function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},P=function(e){return e.length<8},I=function(e,t){return e===t},E={email:"",err:"",success:""};function D(){var e=Object(c.useState)(E),t=Object(u.a)(e,2),a=t[0],s=t[1],r=a.email,n=a.err,i=a.success,o=function(){var e=Object(l.a)(j.a.mark((function e(t){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),S(r)){e.next=3;break}return e.abrupt("return",s(Object(h.a)(Object(h.a)({},a),{},{err:"Invalid email.",success:""})));case 3:return e.prev=3,e.next=6,d.a.post("/user/forgot",{email:r});case 6:return c=e.sent,e.abrupt("return",s(Object(h.a)(Object(h.a)({},a),{},{err:"",success:c.data.msg})));case 10:e.prev=10,e.t0=e.catch(3),e.t0.response.data.msg&&s(Object(h.a)(Object(h.a)({},a),{},{err:e.t0.response.data.msg,success:""}));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"login-form-container active",children:Object(f.jsxs)("form",{onSubmit:o,children:[Object(f.jsx)("h3",{children:"forgot password"}),n&&Object(f.jsx)(k,{variant:"danger",children:n}),i&&Object(f.jsx)(k,{variant:"success",children:i}),Object(f.jsx)("input",{type:"email",name:"email",placeholder:"enter your email",value:r,onChange:function(e){var t,c=e.target,r=c.name,n=c.value;s(Object(h.a)(Object(h.a)({},a),{},(t={},Object(_.a)(t,r,n),Object(_.a)(t,"err",""),Object(_.a)(t,"success",""),t)))},className:"box"}),Object(f.jsx)("button",{type:"submit",className:"btn",children:"reset password"})]})})}var z={password:"",cf_password:"",err:"",success:""};function F(){var e=Object(w.f)().token,t=Object(c.useState)(z),a=Object(u.a)(t,2),s=a[0],r=a[1],n=s.password,i=s.cf_password,o=s.err,b=s.success,O=function(e){var t,a=e.target,c=a.name,n=a.value;r(Object(h.a)(Object(h.a)({},s),{},(t={},Object(_.a)(t,c,n),Object(_.a)(t,"err",""),Object(_.a)(t,"success",""),t)))},p=function(){var t=Object(l.a)(j.a.mark((function t(a){var c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!P(n)){t.next=3;break}return t.abrupt("return",r(Object(h.a)(Object(h.a)({},s),{},{err:"Password must be at least 8 characters.",success:""})));case 3:if(I(n,i)){t.next=5;break}return t.abrupt("return",r(Object(h.a)(Object(h.a)({},s),{},{err:"Password did not match.",success:""})));case 5:return t.prev=5,t.next=8,d.a.post("/user/reset",{password:n},{headers:{Authorization:e}});case 8:return c=t.sent,t.abrupt("return",r(Object(h.a)(Object(h.a)({},s),{},{err:"",success:c.data.msg})));case 12:t.prev=12,t.t0=t.catch(5),t.t0.response.data.msg&&r(Object(h.a)(Object(h.a)({},s),{},{err:t.t0.response.data.msg,success:""}));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"login-form-container active",children:Object(f.jsxs)("form",{onSubmit:p,children:[Object(f.jsx)("h3",{children:"reset password"}),o&&Object(f.jsx)(k,{variant:"danger",children:o}),b&&Object(f.jsx)(k,{variant:"success",children:b}),Object(f.jsx)("input",{type:"password",name:"password",placeholder:"enter your password",value:n,onChange:O,className:"box"}),Object(f.jsx)("input",{type:"password",name:"cf_password",placeholder:"confirm your password",value:i,onChange:O,className:"box"}),Object(f.jsx)("button",{type:"submit",className:"btn",children:"reset password"})]})})}function q(){return Object(f.jsx)("section",{className:"not-found",children:Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:"404"}),Object(f.jsx)("p",{children:"Not Found"})]})})}var L={name:"",email:"",password:"",cf_password:"",err:"",success:""};function T(){var e=Object(c.useState)(L),t=Object(u.a)(e,2),a=t[0],s=t[1],r=a.name,n=a.email,o=a.password,b=a.cf_password,O=a.err,p=a.success,x=function(e){var t,c=e.target,r=c.name,n=c.value;s(Object(h.a)(Object(h.a)({},a),{},(t={},Object(_.a)(t,r,n),Object(_.a)(t,"err",""),Object(_.a)(t,"success",""),t)))},m=function(){var e=Object(l.a)(j.a.mark((function e(t){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!C(r)&&!C(o)){e.next=3;break}return e.abrupt("return",s(Object(h.a)(Object(h.a)({},a),{},{err:"Please fill in all fields",success:""})));case 3:if(S(n)){e.next=5;break}return e.abrupt("return",s(Object(h.a)(Object(h.a)({},a),{},{err:"Invalid email.",success:""})));case 5:if(!P(o)){e.next=7;break}return e.abrupt("return",s(Object(h.a)(Object(h.a)({},a),{},{err:"Password must be atleast 8 characters.",success:""})));case 7:if(I(o,b)){e.next=9;break}return e.abrupt("return",s(Object(h.a)(Object(h.a)({},a),{},{err:"Password did not match.",success:""})));case 9:return e.prev=9,e.next=12,d.a.post("/user/register",{name:r,email:n,password:o});case 12:c=e.sent,s(Object(h.a)(Object(h.a)({},a),{},{err:"",success:c.data.msg})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),e.t0.response.data.msg&&s(Object(h.a)(Object(h.a)({},a),{},{err:e.t0.response.data.msg,success:""}));case 19:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"login-form-container active",children:Object(f.jsxs)("form",{onSubmit:m,children:[Object(f.jsx)("h3",{children:"register form"}),O&&Object(f.jsx)(k,{variant:"danger",children:O}),p&&Object(f.jsx)(k,{variant:"success",children:p}),Object(f.jsx)("input",{type:"text",name:"name",value:r,onChange:x,placeholder:"Enter your name",className:"box"}),Object(f.jsx)("input",{type:"email",name:"email",value:n,onChange:x,placeholder:"Enter your email",className:"box"}),Object(f.jsx)("input",{type:"password",name:"password",value:o,onChange:x,placeholder:"Enter your password",className:"box"}),Object(f.jsx)("input",{type:"password",name:"cf_password",value:b,onChange:x,placeholder:"Enter your confirm password",className:"box"}),Object(f.jsx)("button",{type:"submit",className:"btn",children:"Register"}),Object(f.jsxs)("p",{children:["already have an account? ",Object(f.jsx)(i.b,{to:"/signin",children:"click here"})]})]})})}var U={email:"",password:"",err:"",success:""};function R(){var e=Object(c.useState)(U),t=Object(u.a)(e,2),a=t[0],s=t[1],r=a.email,n=a.password,o=a.err,b=a.success,O=function(e){var t,c=e.target,r=c.name,n=c.value;s(Object(h.a)(Object(h.a)({},a),{},(t={},Object(_.a)(t,r,n),Object(_.a)(t,"err",""),Object(_.a)(t,"success",""),t)))},p=function(){var e=Object(l.a)(j.a.mark((function e(t){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d.a.post("/user/login",{email:r,password:n});case 4:c=e.sent,s(Object(h.a)(Object(h.a)({},a),{},{err:"",success:c.data.msg})),localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),e.t0.response.data.msg&&s(Object(h.a)(Object(h.a)({},a),{},{err:e.t0.response.data.msg,success:""}));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"login-form-container active",children:Object(f.jsxs)("form",{onSubmit:p,children:[Object(f.jsx)("h3",{children:"login form"}),o&&Object(f.jsx)(k,{variant:"danger",children:o}),b&&Object(f.jsx)(k,{variant:"success",children:b}),Object(f.jsx)("input",{type:"email",name:"email",placeholder:"enter your email",value:r,onChange:O,className:"box"}),Object(f.jsx)("input",{type:"password",name:"password",placeholder:"enter your password",value:n,onChange:O,className:"box"}),Object(f.jsx)("button",{type:"submit",className:"btn",children:"login now"}),Object(f.jsxs)("p",{children:["forget password? ",Object(f.jsx)(i.b,{to:"/forgot_password",children:"click here"})]}),Object(f.jsxs)("p",{children:["don't have an account? ",Object(f.jsx)(i.b,{to:"/register",children:"create one"})]})]})})}var Y=a(37),B=a(38),V=a(41),$=a(40),M=a(39),H=a.n(M),X=function(e){Object(V.a)(a,e);var t=Object($.a)(a);function a(){return Object(Y.a)(this,a),t.apply(this,arguments)}return Object(B.a)(a,[{key:"render",value:function(){var e=this,t=this.props.total;return Object(f.jsx)(H.a,{env:"sandbox",client:{sandbox:"ASN4DFOjrWqVE3YFRVNm5IIFiovLHlgucJh5Wchv1_E4fDzH2WqTDlVO5VStIb1Gsi2_xCcxLpsejbe0",production:"YOUR-PRODUCTION-APP-ID"},currency:"USD",total:t,onError:function(e){console.log("Error!",e)},onSuccess:function(t){e.props.tranSuccess(t)},onCancel:function(e){console.log("The payment was cancelled!",e)},style:{size:"small",color:"black",shape:"rect",label:"checkout",tagline:!1}})}}]),a}(s.a.Component);function W(){var e=Object(c.useState)(0),t=Object(u.a)(e,2),a=t[0],s=t[1],r=Object(c.useContext)(v),n=Object(u.a)(r.token,1)[0],i=Object(u.a)(r.userAPI.cart,2),o=i[0],b=i[1];Object(c.useEffect)((function(){!function(){var e=o.reduce((function(e,t){return e+t.price*t.quantity}),0);s(e)}()}),[o]);var O=function(){var e=Object(l.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.patch("/user/addcart",{cart:t},{headers:{Authorization:n}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(l.a)(j.a.mark((function e(t){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.post("/api/payment",{orderItems:o,total:a,payment:t,paidAt:Date.now()},{headers:{Authorization:n}});case 3:c=e.sent,b([]),O([]),alert(c.data.msg),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response.data.msg);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("section",{className:"shopping-cart-container active",children:[Object(f.jsxs)("div",{className:"products-container",children:[Object(f.jsx)("h3",{className:"title",children:"your products"}),Object(f.jsx)("div",{className:"box-container",children:o.map((function(e){return Object(f.jsxs)("div",{className:"box",children:[Object(f.jsx)("i",{className:"fas fa-times",onClick:function(){return t=e._id,void(window.confirm("Do you want to delete this product?")&&(o.forEach((function(e,a){e._id===t&&o.splice(a,1)})),b(Object(p.a)(o)),O(o)));var t}}),Object(f.jsx)("img",{src:e.images.url,alt:""}),Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("h3",{children:e.title}),Object(f.jsx)("span",{children:" quantity : "}),Object(f.jsxs)("div",{className:"wrapper",children:[Object(f.jsx)("span",{className:"minus",onClick:function(){return t=e._id,o.forEach((function(e){e._id===t&&(1===e.quantity?e.quantity=1:e.quantity-=1)})),b(Object(p.a)(o)),void O(o);var t},children:"-"}),Object(f.jsx)("span",{className:"num",children:e.quantity<10?"0"+e.quantity:e.quantity}),Object(f.jsx)("span",{className:"plus",onClick:function(){return t=e._id,o.forEach((function(e){e._id===t&&(e.quantity+=1)})),b(Object(p.a)(o)),void O(o);var t},children:"+"})]}),Object(f.jsx)("br",{}),Object(f.jsx)("span",{children:" price : "}),Object(f.jsxs)("span",{className:"price",children:[" $",e.price," "]})]})]},e._id)}))})]}),Object(f.jsxs)("div",{className:"cart-total",children:[Object(f.jsx)("h3",{className:"title",children:" cart total "}),Object(f.jsxs)("div",{className:"box",children:[Object(f.jsxs)("h3",{className:"subtotal",children:[" ","subtotal(",o.reduce((function(e,t){return e+t.quantity}),0)," items) :"," ",Object(f.jsxs)("span",{children:["$",o.reduce((function(e,t){return e+t.price*t.quantity}),0)]})," "]}),Object(f.jsxs)("h3",{className:"total",children:[" ","total :"," ",Object(f.jsxs)("span",{children:["$",o.reduce((function(e,t){return e+t.price*t.quantity}),0)]})," "]}),Object(f.jsx)(X,{total:a,tranSuccess:h})]})]})]})}function J(){return Object(f.jsx)("div",{className:"loading",children:Object(f.jsx)("img",{src:"./loader.gif",alt:""})})}function G(){var e=Object(c.useContext)(v),t=Object(u.a)(e.categoriesAPI.categories,1)[0],a=Object(u.a)(e.categoriesAPI.callback,2),s=a[0],r=a[1],n=Object(c.useState)(""),i=Object(u.a)(n,2),o=i[0],b=i[1],O=Object(c.useState)(!1),h=Object(u.a)(O,2),p=h[0],x=h[1],m=Object(c.useState)(!1),g=Object(u.a)(m,2),N=g[0],y=g[1],w=Object(c.useState)(!1),k=Object(u.a)(w,2),A=k[0],_=k[1],C=Object(c.useState)(""),S=Object(u.a)(C,2),P=S[0],I=S[1],E=Object(u.a)(e.token,1)[0],D=Object(u.a)(e.userAPI.isAdmin,1)[0],z=function(){var e=Object(l.a)(j.a.mark((function e(t){var a,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,D){e.next=4;break}return e.abrupt("return",alert("You're not an admin"));case 4:if(a=t.target.files[0]){e.next=7;break}return e.abrupt("return",alert("File does not exist."));case 7:if(!(a.size>1048576)){e.next=9;break}return e.abrupt("return",alert("Size is too large!"));case 9:if("image/jpeg"===a.type||"image/png"===a.type){e.next=11;break}return e.abrupt("return",alert("File format is incorrect."));case 11:return(c=new FormData).append("file",a),_(!0),e.next=16,d.a.post("/api/upload_category",c,{headers:{"content-type":"multipart/form-data",Authorization:E}});case 16:s=e.sent,_(!1),y(s.data),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,D){e.next=3;break}return e.abrupt("return",alert("You're not an admin"));case 3:return _(!0),e.next=6,d.a.post("/api/destroy",{public_id:N.public_id},{headers:{Authorization:E}});case 6:_(!1),y(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(l.a)(j.a.mark((function e(t){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!p){e.next=9;break}return e.next=5,d.a.put("/api/category/".concat(P),{name:o,image:N},{headers:{Authorization:E}});case 5:a=e.sent,alert(a.data.msg),e.next=13;break;case 9:return e.next=11,d.a.post("/api/category",{name:o,image:N},{headers:{Authorization:E}});case 11:c=e.sent,alert(c.data.msg);case 13:x(!1),b(""),y(!1),r(!s),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(l.a)(j.a.mark((function e(t,a,c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(t),b(a),y(c),x(!0);case 4:case"end":return e.stop()}}),e)})));return function(t,a,c){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(j.a.mark((function e(t,a){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(a),F(),e.next=5,d.a.delete("/api/category/".concat(t),{headers:{Authorization:E}});case 5:c=e.sent,alert(c.data.msg),r(!s),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),U={display:N?"block":"none"};return Object(f.jsxs)("section",{className:"categories",children:[Object(f.jsx)("div",{class:"heading",children:Object(f.jsx)("h3",{children:"Categories"})}),Object(f.jsxs)("form",{onSubmit:q,children:[Object(f.jsxs)("div",{className:"upload",children:[Object(f.jsx)("input",{type:"file",name:"file",id:"file_up",onChange:z}),A?Object(f.jsx)(J,{}):Object(f.jsxs)("div",{id:"file_img",style:U,children:[Object(f.jsx)("img",{src:N?N.url:"",alt:""}),Object(f.jsx)("span",{onClick:F,children:"X"})]})]}),Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"inputBox",children:[Object(f.jsx)("label",{htmlFor:"category",children:"Category"}),Object(f.jsx)("input",{type:"text",name:"category",placeholder:"Category",value:o,required:!0,onChange:function(e){return b(e.target.value)}})]}),Object(f.jsx)("button",{className:"btn",type:"submit",children:p?"Update":"Create"})]})]}),Object(f.jsx)("div",{className:"box-container",children:t.map((function(e){return Object(f.jsxs)("div",{className:"box",children:[Object(f.jsx)("img",{src:e.image.url,alt:""}),Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("h3",{children:e.name}),Object(f.jsx)("i",{className:"fas fa-edit",onClick:function(){return L(e._id,e.name,e.image)}}),Object(f.jsx)("i",{className:"fas fa-trash",onClick:function(){return T(e._id,e.image)}})]}),Object(f.jsx)("div",{})]},e._id)}))})]})}var Z={product_id:"",title:"",price:0,category:"",_id:""};function K(){var e=Object(c.useContext)(v),t=Object(c.useState)(Z),a=Object(u.a)(t,2),s=a[0],r=a[1],n=Object(c.useState)(!1),i=Object(u.a)(n,2),o=i[0],b=i[1],O=Object(c.useState)(!1),p=Object(u.a)(O,2),x=p[0],m=p[1],g=Object(u.a)(e.categoriesAPI.categories,1)[0],N=Object(u.a)(e.userAPI.isAdmin,1)[0],y=Object(u.a)(e.token,1)[0],k=Object(u.a)(e.productsAPI.products,1)[0],A=Object(c.useState)(!1),C=Object(u.a)(A,2),S=C[0],P=C[1],I=Object(u.a)(e.productsAPI.callback,2),E=I[0],D=I[1],z=Object(w.e)(),F=Object(w.f)();Object(c.useEffect)((function(){F.id?(P(!0),k.forEach((function(e){e._id===F.id&&(r(e),b(e.images))}))):(P(!1),r(Z),b(!1))}),[F.id,k]);var q=function(){var e=Object(l.a)(j.a.mark((function e(t){var a,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,N){e.next=4;break}return e.abrupt("return",alert("You're not an admin"));case 4:if(a=t.target.files[0]){e.next=7;break}return e.abrupt("return",alert("File does not exist."));case 7:if(!(a.size>1048576)){e.next=9;break}return e.abrupt("return",alert("Size is too large!"));case 9:if("image/jpeg"===a.type||"image/png"===a.type){e.next=11;break}return e.abrupt("return",alert("File format is incorrect."));case 11:return(c=new FormData).append("file",a),m(!0),e.next=16,d.a.post("/api/upload",c,{headers:{"content-type":"multipart/form-data",Authorization:y}});case 16:s=e.sent,m(!1),b(s.data),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,N){e.next=3;break}return e.abrupt("return",alert("You're not an admin"));case 3:return m(!0),e.next=6,d.a.post("/api/destroy",{public_id:o.public_id},{headers:{Authorization:y}});case 6:m(!1),b(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),T=function(e){var t=e.target,a=t.name,c=t.value;r(Object(h.a)(Object(h.a)({},s),{},Object(_.a)({},a,c)))},U=function(){var e=Object(l.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,N){e.next=4;break}return e.abrupt("return",alert("You're not an admin"));case 4:if(o){e.next=6;break}return e.abrupt("return",alert("Not image uploaded"));case 6:if(!S){e.next=11;break}return e.next=9,d.a.put("/api/products/".concat(s._id),Object(h.a)(Object(h.a)({},s),{},{images:o}),{headers:{Authorization:y}});case 9:e.next=13;break;case 11:return e.next=13,d.a.post("/api/products",Object(h.a)(Object(h.a)({},s),{},{images:o}),{headers:{Authorization:y}});case 13:D(!E),z.push("/"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),R={display:o?"block":"none"};return Object(f.jsxs)("section",{className:"create_product",children:[Object(f.jsxs)("div",{className:"upload",children:[Object(f.jsx)("input",{type:"file",name:"file",id:"file_up",onChange:q}),x?Object(f.jsx)(J,{}):Object(f.jsxs)("div",{id:"file_img",style:R,children:[Object(f.jsx)("img",{src:o?o.url:"",alt:""}),Object(f.jsx)("span",{onClick:L,children:"X"})]})]}),Object(f.jsxs)("form",{onSubmit:U,children:[Object(f.jsxs)("div",{className:"inputBox",children:[Object(f.jsx)("label",{htmlFor:"product_id",children:"Product ID"}),Object(f.jsx)("input",{type:"text",name:"product_id",id:"product_id",placeholder:"Product ID",required:!0,value:s.product_id,onChange:T,disabled:s._id})]}),Object(f.jsxs)("div",{className:"inputBox",children:[Object(f.jsx)("label",{htmlFor:"title",children:"Title"}),Object(f.jsx)("input",{type:"text",name:"title",id:"title",placeholder:"Title",required:!0,value:s.title,onChange:T})]}),Object(f.jsxs)("div",{className:"inputBox",children:[Object(f.jsx)("label",{htmlFor:"price",children:"Price"}),Object(f.jsx)("input",{type:"number",name:"price",id:"price",placeholder:"Price",required:!0,value:s.price,onChange:T})]}),Object(f.jsxs)("div",{className:"inputBox",children:[Object(f.jsx)("label",{htmlFor:"category",children:"Categories: "}),Object(f.jsxs)("select",{name:"category",value:s.category,onChange:T,children:[Object(f.jsx)("option",{value:"",children:"Please Select a category"}),g.map((function(e){return Object(f.jsx)("option",{value:e._id,children:e.name},e._id)}))]})]}),Object(f.jsx)("button",{type:"submit",className:"btn",children:S?"Update":"Create"})]})]})}function Q(e){var t=e.product,a=e.isAdmin,c=e.deleteProduct,s=e.handleCheck;e.addCart;return Object(f.jsxs)("div",{className:"box",children:[a&&Object(f.jsx)("input",{type:"checkbox",checked:t.checked,onChange:function(){return s(t._id)}}),Object(f.jsx)("div",{className:"image",children:Object(f.jsx)("img",{src:t.images.url,alt:t.title})}),Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("h3",{children:t.title}),Object(f.jsxs)("div",{className:"stars",children:[Object(f.jsx)("i",{className:"fas fa-star"}),Object(f.jsx)("i",{className:"fas fa-star"}),Object(f.jsx)("i",{className:"fas fa-star"}),Object(f.jsx)("i",{className:"fas fa-star"}),Object(f.jsx)("i",{className:"fas fa-star-half-alt"})]}),Object(f.jsxs)("div",{className:"price",children:["$",t.price]}),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)(i.b,{className:"btn",to:"#1",onClick:function(){return c(t._id,t.images.public_id)},children:"Delete"}),Object(f.jsx)(i.b,{className:"btn",to:"/edit_product/".concat(t._id),children:"Edit"})]})]})]})}function ee(){var e=Object(c.useContext)(v),t=Object(u.a)(e.categoriesAPI.categories,1)[0],a=Object(u.a)(e.productsAPI.category,2),s=a[0],r=a[1],n=Object(u.a)(e.productsAPI.sort,2),i=n[0],o=n[1],j=Object(u.a)(e.productsAPI.search,2),l=j[0],b=j[1];return Object(f.jsxs)("div",{className:"filter_menu",children:[Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("span",{children:"Filters: "}),Object(f.jsxs)("select",{name:"category",value:s,onChange:function(e){r(e.target.value),b("")},children:[Object(f.jsx)("option",{value:"",children:"All Products"}),t.map((function(e){return Object(f.jsx)("option",{value:"category="+e._id,children:e.name},e._id)}))]})]}),Object(f.jsx)("input",{type:"text",value:l,placeholder:"Enter your search!",onChange:function(e){return b(e.target.value.toLowerCase())}}),Object(f.jsxs)("div",{className:"row sort",children:[Object(f.jsx)("span",{children:"Sort By: "}),Object(f.jsxs)("select",{value:i,onChange:function(e){return o(e.target.value)},children:[Object(f.jsx)("option",{value:"",children:"Newest"}),Object(f.jsx)("option",{value:"sort=oldest",children:"Oldest"}),Object(f.jsx)("option",{value:"sort=-sold",children:"Best sales"}),Object(f.jsx)("option",{value:"sort=-price",children:"Price: High-Low"}),Object(f.jsx)("option",{value:"sort=price",children:"Price: Low-High"})]})]})]})}function te(){var e=Object(c.useContext)(v),t=Object(u.a)(e.productsAPI.products,2),a=t[0],s=t[1],r=Object(u.a)(e.userAPI.isAdmin,1)[0],n=Object(u.a)(e.token,1)[0],i=Object(u.a)(e.productsAPI.callback,2),o=i[0],b=i[1],O=Object(c.useState)(!1),h=Object(u.a)(O,2),x=h[0],m=h[1],g=Object(c.useState)(!1),N=Object(u.a)(g,2),y=N[0],w=N[1],k=function(e){a.forEach((function(t){t._id===e&&(t.checked=!t.checked)})),s(Object(p.a)(a))},A=function(){var e=Object(l.a)(j.a.mark((function e(t,a){var c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),c=d.a.post("/api/destroy",{public_id:a},{headers:{Authorization:n}}),s=d.a.delete("/api/products/".concat(t),{headers:{Authorization:n}}),e.next=6,c;case 6:return e.next=8,s;case 8:b(!o),m(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,a){return e.apply(this,arguments)}}();return x?Object(f.jsx)("div",{children:Object(f.jsx)(J,{})}):Object(f.jsxs)("section",{className:"products_admin",children:[Object(f.jsx)(ee,{}),r&&Object(f.jsxs)("div",{className:"delete-all",children:[Object(f.jsx)("span",{children:"Select all"}),Object(f.jsx)("input",{type:"checkbox",checked:y,onChange:function(){a.forEach((function(e){e.checked=!y})),s(Object(p.a)(a)),w(!y)}}),Object(f.jsx)("button",{onClick:function(){a.forEach((function(e){e.checked&&A(e._id,e.images.public_id)}))},children:"Delete All"})]}),Object(f.jsx)("div",{className:"box-container",children:a.map((function(e){return Object(f.jsx)(Q,{product:e,isAdmin:r,deleteProduct:A,handleCheck:k},e._id)}))})]})}function ae(){var e=Object(w.f)().id,t=Object(w.e)(),a=Object(c.useState)([]),s=Object(u.a)(a,2),r=s[0],n=s[1],i=Object(c.useContext)(v),o=Object(u.a)(i.token,1)[0],b=Object(u.a)(i.userAPI.users,1)[0],O=Object(c.useState)(!1),h=Object(u.a)(O,2),p=h[0],x=h[1],m=Object(c.useState)(!1),g=Object(u.a)(m,2),N=g[0],y=g[1],A=Object(c.useState)(!1),_=Object(u.a)(A,2),C=_[0],S=_[1],P=Object(c.useState)(0),I=Object(u.a)(P,2),E=I[0],D=I[1];Object(c.useEffect)((function(){0!==b.length?b.forEach((function(t){t._id===e&&(n(t),x(1===t.role))})):t.push("/profile")}),[b,e,t]);var z=function(){var e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,E%2===0){e.next=7;break}return e.next=4,d.a.patch("/user/update_role/".concat(r._id),{role:p?1:0},{headers:{Authorization:o}});case 4:t=e.sent,S(t.data.msg),D(0);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response.data.msg&&y(e.t0.response.data.msg);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"profile_page edit_user",children:[Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("button",{onClick:function(){return t.goBack()},className:"go_back",children:[Object(f.jsx)("i",{className:"fas fa-long-arrow-alt-left"}),"Go Back"]})}),Object(f.jsxs)("div",{className:"col-left",children:[Object(f.jsx)("h2",{children:"Edit User"}),N&&Object(f.jsx)(k,{variant:"danger",children:N}),C&&Object(f.jsx)(k,{variant:"success",children:C}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{htmlFor:"name",children:"Name"}),Object(f.jsx)("input",{type:"text",name:"name",defaultValue:r.name,disabled:!0})]}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{htmlFor:"email",children:"Email"}),Object(f.jsx)("input",{type:"email",name:"email",defaultValue:r.email,disabled:!0})]}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("input",{type:"checkbox",id:"isAdmin",checked:p,onChange:function(){S(""),y(""),x(!p),D(E+1)}}),Object(f.jsx)("label",{htmlFor:"isAdmin",children:"isAdmin"})]}),Object(f.jsx)("button",{className:"btn",onClick:z,children:"Update"})]})]})}var ce={name:"",email:"",password:"",cf_password:"",err:"",success:""};function se(e){var t=Object(c.useContext)(v),a=Object(u.a)(t.userAPI.user,1)[0],s=Object(u.a)(t.userAPI.history,2),r=s[0],n=s[1],o=Object(u.a)(t.userAPI.isAdmin,1)[0],b=Object(u.a)(t.userAPI.users,2),O=b[0],p=b[1],x=Object(u.a)(t.token,1)[0],m=Object(c.useState)(ce),g=Object(u.a)(m,2),N=g[0],y=g[1],w=Object(c.useState)(!1),A=Object(u.a)(w,2),C=A[0],S=A[1],E=Object(c.useState)(!1),D=Object(u.a)(E,2),z=D[0],F=D[1],q=Object(c.useState)(!1),L=Object(u.a)(q,2),T=L[0],U=L[1],R=N.name,Y=N.password,B=N.cf_password,V=N.err,$=N.success;Object(c.useEffect)((function(){if(o){var e=function(){var e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/user/all_info",{headers:{Authorization:x}});case 2:t=e.sent,p(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}else{var t=function(){var e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/payment",{headers:{Authorization:x}});case 2:t=e.sent,n(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t()}}),[x,o,p,n]);var M=function(e){var t,a=e.target,c=a.name,s=a.value;y(Object(h.a)(Object(h.a)({},N),{},(t={},Object(_.a)(t,c,s),Object(_.a)(t,"err",""),Object(_.a)(t,"success",""),t)))},H=function(){var e=Object(l.a)(j.a.mark((function e(t){var a,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,a=t.target.files[0]){e.next=5;break}return e.abrupt("return",y(Object(h.a)(Object(h.a)({},N),{},{err:"No files were uploaded.",success:""})));case 5:if(!(a.size>1048576)){e.next=7;break}return e.abrupt("return",y(Object(h.a)(Object(h.a)({},N),{},{err:"Size is too large.",success:""})));case 7:if("image/jpeg"===a.type||"image/png"===a.type){e.next=9;break}return e.abrupt("return",y(Object(h.a)(Object(h.a)({},N),{},{err:"File format is incorrect.",success:""})));case 9:return(c=new FormData).append("file",a),F(!0),e.next=14,d.a.post("/api/upload_avatar",c,{headers:{"content-type":"multipart/form-data",Authorization:x}});case 14:s=e.sent,F(!1),S(s.data.url),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),y(Object(h.a)(Object(h.a)({},N),{},{err:e.t0.response.data.msg,success:""}));case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(l.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a._id===t){e.next=8;break}if(!window.confirm("Are you sure you want to delete this account?")){e.next=8;break}return F(!0),e.next=6,d.a.delete("/user/delete/".concat(t),{headers:{Authorization:x}});case 6:F(!1),U(!T);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),y(Object(h.a)(Object(h.a)({},N),{},{err:e.t0.response.data.msg,success:""}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{children:[V&&Object(f.jsx)(k,{variant:"danger",children:V}),$&&Object(f.jsx)(k,{variant:"success",children:$}),z&&Object(f.jsx)("h3",{children:"Loading....."})]}),Object(f.jsxs)("div",{className:"profile_page",children:[Object(f.jsxs)("div",{className:"col-left",children:[Object(f.jsx)("h2",{children:o?"Admin Profile":"User Profile"}),Object(f.jsxs)("div",{className:"avatar",children:[Object(f.jsx)("img",{src:C||a.avatar,alt:""}),Object(f.jsxs)("span",{children:[Object(f.jsx)("i",{className:"fas fa-camera"}),Object(f.jsx)("p",{children:"Change"}),Object(f.jsx)("input",{type:"file",name:"file",id:"file_upload",onChange:H})]})]}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{htmlFor:"name",children:"Name"}),Object(f.jsx)("input",{type:"text",name:"name",id:"name",placeholder:"Your name",defaultValue:a.name,onChange:M}),Object(f.jsx)("label",{htmlFor:"email",children:"Email"}),Object(f.jsx)("input",{type:"email",name:"email",id:"email",placeholder:"Your email address",defaultValue:a.email,disabled:!0}),Object(f.jsx)("label",{htmlFor:"password",children:"New Password"}),Object(f.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Your password",value:Y,onChange:M}),Object(f.jsx)("label",{htmlFor:"cf_password",children:"Confirm New Password"}),Object(f.jsx)("input",{type:"password",name:"cf_password",id:"cf_password",placeholder:"Confirm password",value:B,onChange:M}),Object(f.jsx)("button",{className:"btn",disabled:z,onClick:function(){(R||C)&&function(){try{d.a.patch("/user/update",{name:R||a.name,avatar:C||a.avatar},{headers:{Authorization:x}}),y(Object(h.a)(Object(h.a)({},N),{},{err:"",success:"Update Success!"}))}catch(V){y(Object(h.a)(Object(h.a)({},N),{},{err:V.response.data.msg,success:""}))}}(),Y&&function(){if(P(Y))return y(Object(h.a)(Object(h.a)({},N),{},{err:"Password must be at least 8 characters.",success:""}));if(!I(Y,B))return y(Object(h.a)(Object(h.a)({},N),{},{err:"Password did not match.",success:""}));try{d.a.post("/user/reset",{password:Y},{headers:{Authorization:x}}),y(Object(h.a)(Object(h.a)({},N),{},{err:"",success:"Update Success!"}))}catch(V){y(Object(h.a)(Object(h.a)({},N),{},{err:V.response.data.msg,success:""}))}}()},children:"Update"})]})]}),Object(f.jsxs)("div",{className:"col-right",children:[Object(f.jsx)("h2",{children:o?"Users":"My Orders"}),Object(f.jsx)("div",{style:{overflowX:"auto"},children:Object(f.jsxs)("table",{className:"customers",children:[Object(f.jsx)("thead",{children:o?Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"ID"}),Object(f.jsx)("th",{children:"Name"}),Object(f.jsx)("th",{children:"Email"}),Object(f.jsx)("th",{children:"Admin"}),Object(f.jsx)("th",{children:"Action"})]}):Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"ID"}),Object(f.jsx)("th",{children:"DATE"}),Object(f.jsx)("th",{children:"TOTAL"}),Object(f.jsx)("th",{children:"PAID"}),Object(f.jsx)("th",{children:"DELIVERED"}),Object(f.jsx)("th",{children:"ACTIONS"})]})}),o?Object(f.jsx)("tbody",{children:O.map((function(e){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:e._id}),Object(f.jsx)("td",{children:e.name}),Object(f.jsx)("td",{children:e.email}),Object(f.jsx)("td",{children:1===e.role?Object(f.jsx)("i",{className:"fas fa-check",title:"Admin"}):Object(f.jsx)("i",{className:"fas fa-times",title:"User"})}),Object(f.jsxs)("td",{children:[Object(f.jsx)(i.b,{to:"/edit_user/".concat(e._id),children:Object(f.jsx)("i",{className:"fas fa-edit",title:"Edit"})}),Object(f.jsx)("i",{className:"fas fa-trash-alt",title:"Remove",onClick:function(){return X(e._id)}})]})]},e._id)}))}):Object(f.jsx)("tbody",{children:r.map((function(t){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:t._id}),Object(f.jsx)("td",{children:t.createdAt.substring(0,10)}),Object(f.jsxs)("td",{children:["$",t.totalPrice]}),Object(f.jsx)("td",{children:t.isPaid?t.paidAt.substring(0,10):"No"}),Object(f.jsx)("td",{children:t.isDelivered?t.deliveredAt.substring(0,10):"No"}),Object(f.jsx)("td",{children:Object(f.jsx)("button",{className:"btn",onClick:function(){return e.history.push("/order/".concat(t._id))},children:"Details"})})]},t._id)}))})]})})]})]})]})}function re(){var e=Object(c.useContext)(v),t=Object(u.a)(e.categoriesAPI.categories,1)[0],a=Object(u.a)(e.productsAPI.products,1)[0],s=e.userAPI.addCart,r=Object(u.a)(e.productsAPI.category,2)[1],n=Object(u.a)(e.productsAPI.search,2)[1],i=Object(u.a)(e.userAPI.isLogged,1)[0],o=Object(c.useState)({x:0,y:0}),j=Object(u.a)(o,2),l=j[0],b=j[1],d=Object(w.e)(),O=Object(c.useRef)(null),h=function(e){r(e),n("")};return Object(f.jsxs)("div",{children:[Object(f.jsxs)("section",{className:"home",id:"home",onMouseMove:function(e){return b({x:(window.innerWidth-2*e.pageX)/90,y:(window.innerHeight-2*e.pageY)/90})},onMouseLeave:function(){return b({x:0,y:0})},children:[Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("span",{children:"welcome foodies"}),Object(f.jsx)("h3",{children:"different spices for the different tastes \ud83d\ude0b"}),Object(f.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Omnis unde dolores temporibus hic quam debitis tenetur harum nemo."}),Object(f.jsx)("button",{className:"btn",onClick:function(){return O.current.scrollIntoView()},children:"order now"})]}),Object(f.jsxs)("div",{className:"image",children:[Object(f.jsx)("img",{src:"./images/home-img.png",alt:"",className:"home-img"}),Object(f.jsx)("img",{src:"./images/home-parallax-img.png",alt:"",className:"home-parallax-img",style:{transform:"translateX(".concat(l.y,"px) translateY(").concat(l.x,"px)")}})]})]}),Object(f.jsxs)("section",{className:"about",id:"about",children:[Object(f.jsx)("div",{className:"image",children:Object(f.jsx)("img",{src:"./images/about-img.png",alt:""})}),Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("span",{children:"why choose us?"}),Object(f.jsx)("h3",{className:"title",children:"what's make our food delicious!"}),Object(f.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Eos ut explicabo, numquam iusto est a ipsum assumenda tempore esse corporis?"}),Object(f.jsx)("button",{className:"btn",children:"read more"}),Object(f.jsxs)("div",{className:"icons-container",children:[Object(f.jsxs)("div",{className:"icons",children:[Object(f.jsx)("img",{src:"./images/serv-1.png",alt:"fast delivery"}),Object(f.jsx)("h3",{children:"fast delivery"})]}),Object(f.jsxs)("div",{className:"icons",children:[Object(f.jsx)("img",{src:"./images/serv-2.png",alt:"fresh food"}),Object(f.jsx)("h3",{children:"fresh food"})]}),Object(f.jsxs)("div",{className:"icons",children:[Object(f.jsx)("img",{src:"./images/serv-3.png",alt:"best quality"}),Object(f.jsx)("h3",{children:"best quality"})]}),Object(f.jsxs)("div",{className:"icons",children:[Object(f.jsx)("img",{src:"./images/serv-4.png",alt:"24/7 support"}),Object(f.jsx)("h3",{children:"24/7 support"})]})]})]})]}),Object(f.jsxs)("section",{className:"category",children:[Object(f.jsxs)("div",{className:"box",onClick:function(){return h("")},children:[Object(f.jsx)("img",{src:"",alt:""}),Object(f.jsx)("h3",{children:"All"})]}),t.map((function(e){return Object(f.jsxs)("div",{className:"box",onClick:function(){return h("category="+e._id)},children:[Object(f.jsx)("img",{src:e.image.url,alt:e.name}),Object(f.jsx)("h3",{children:e.name})]},e._id)}))]}),Object(f.jsxs)("section",{className:"popular",ref:O,children:[Object(f.jsxs)("div",{className:"heading",children:[Object(f.jsx)("span",{children:"our menu"}),Object(f.jsx)("h3",{children:"our top dishes"})]}),Object(f.jsx)("div",{className:"box-container",children:a.map((function(e){return Object(f.jsxs)("div",{className:"box",children:[Object(f.jsx)("div",{className:"image",children:Object(f.jsx)("img",{src:e.images.url,alt:""})}),Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("h3",{children:e.title}),Object(f.jsxs)("div",{className:"stars",children:[Object(f.jsx)("i",{className:"fas fa-star"}),Object(f.jsx)("i",{className:"fas fa-star"}),Object(f.jsx)("i",{className:"fas fa-star"}),Object(f.jsx)("i",{className:"fas fa-star"}),Object(f.jsx)("i",{className:"fas fa-star-half-alt"}),Object(f.jsx)("span",{children:0!==e.sold?"(".concat(e.sold<10?"0"+e.sold:e.sold,")"):null})]}),Object(f.jsxs)("div",{className:"price",children:["$",e.price]}),Object(f.jsx)("button",{className:"btn",onClick:function(){return i?s(e):d.push("/signin")},children:"add to cart"})]})]},e._id)}))})]}),Object(f.jsxs)("section",{className:"banner",children:[Object(f.jsx)("div",{className:"row-banner",style:{background:"url(./images/row-banner.png) center center / cover no-repeat"},children:Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("span",{children:"double cheese"}),Object(f.jsx)("h3",{children:"burger"}),Object(f.jsx)("p",{children:"with cococola and fries"}),Object(f.jsx)("button",{className:"btn",children:"order now"})]})}),Object(f.jsxs)("div",{className:"grid-banner",children:[Object(f.jsxs)("div",{className:"grid",children:[Object(f.jsx)("img",{src:"./images/banner-1.png",alt:""}),Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("span",{children:"special offer"}),Object(f.jsx)("h3",{children:"upto 50% off"}),Object(f.jsx)("button",{className:"btn",children:"order now"})]})]}),Object(f.jsxs)("div",{className:"grid",children:[Object(f.jsx)("img",{src:"./images/banner-2.png",alt:""}),Object(f.jsxs)("div",{className:"content center",children:[Object(f.jsx)("span",{children:"special offer"}),Object(f.jsx)("h3",{children:"upto 25% extra"}),Object(f.jsx)("button",{className:"btn",children:"order now"})]})]}),Object(f.jsxs)("div",{className:"grid",children:[Object(f.jsx)("img",{src:"./images/banner-3.png",alt:""}),Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("span",{children:"limited offer"}),Object(f.jsx)("h3",{children:"100% cashback"}),Object(f.jsx)("button",{className:"btn",children:"order now"})]})]})]})]}),Object(f.jsxs)("section",{className:"order",children:[Object(f.jsxs)("div",{className:"heading",children:[Object(f.jsx)("span",{children:"order now"}),Object(f.jsx)("h3",{children:"fastest home delivery"})]}),Object(f.jsxs)("div",{className:"icons-container",children:[Object(f.jsxs)("div",{className:"icons",children:[Object(f.jsx)("img",{src:"./images/icon-1.png",alt:""}),Object(f.jsx)("h3",{children:"7:00am to 10:30pm"})]}),Object(f.jsxs)("div",{className:"icons",children:[Object(f.jsx)("img",{src:"./images/icon-2.png",alt:""}),Object(f.jsx)("h3",{children:"+123-456-7890"})]}),Object(f.jsxs)("div",{className:"icons",children:[Object(f.jsx)("img",{src:"./images/icon-3.png",alt:""}),Object(f.jsx)("h3",{children:"mumbai, india - 400104"})]})]})]})]})}function ne(){var e=Object(c.useContext)(v),t=Object(u.a)(e.userAPI.history,1)[0],a=Object(c.useState)([]),s=Object(u.a)(a,2),r=s[0],n=s[1],i=Object(w.f)();return Object(c.useEffect)((function(){i.id&&t.forEach((function(e){e._id===i.id&&n(e)}))}),[i.id,t]),0===r.length?null:Object(f.jsxs)("section",{className:"shopping-cart-container active",children:[Object(f.jsxs)("div",{className:"products-container",children:[Object(f.jsx)("h3",{className:"title",children:"products"}),Object(f.jsx)("div",{className:"box-container",children:r.orderItems.map((function(e){return Object(f.jsxs)("div",{className:"box",children:[Object(f.jsx)("img",{src:e.images.url,alt:""}),Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("h3",{children:e.title}),Object(f.jsx)("span",{children:" quantity : "}),Object(f.jsx)("span",{children:e.quantity}),Object(f.jsx)("br",{}),Object(f.jsx)("span",{children:" price : "}),Object(f.jsxs)("span",{className:"price",children:[" $",e.price," "]})]})]},e._id)}))})]}),Object(f.jsxs)("div",{className:"cart-total",children:[Object(f.jsx)("h3",{className:"title",children:" shipping address "}),Object(f.jsxs)("div",{className:"box",children:[Object(f.jsxs)("h3",{className:"subtotal",children:[r.shippingAddress.address,","]}),Object(f.jsxs)("h3",{className:"subtotal",children:[r.shippingAddress.city," -"," ",r.shippingAddress.postalCode]}),Object(f.jsx)("h3",{className:"subtotal",children:r.shippingAddress.country})]})]}),Object(f.jsxs)("div",{className:"cart-total",children:[Object(f.jsx)("h3",{className:"title",children:" payment details "}),Object(f.jsxs)("div",{className:"box",children:[Object(f.jsxs)("h3",{className:"subtotal",children:["Method: ",r.paymentMethod]}),Object(f.jsxs)("h3",{className:"subtotal",children:["Id: ",r.paymentResult.id,","]}),Object(f.jsxs)("h3",{className:"subtotal",children:["status: ",Object(f.jsx)("span",{className:"success",children:r.paymentResult.status?"Success":""})]}),Object(f.jsxs)("h3",{className:"subtotal",children:["Date: "," ",r.paymentResult.update_time]}),Object(f.jsxs)("h3",{className:"subtotal",children:["Email: "," ",r.paymentResult.email_address]})]})]})]})}function ie(e){var t=Object(c.useContext)(v),a=Object(u.a)(t.userAPI.history,2),s=a[0],r=a[1],n=Object(u.a)(t.userAPI.isAdmin,1)[0],i=Object(u.a)(t.token,1)[0];return Object(c.useEffect)((function(){if(i){var e=function(){var e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,d.a.get("/api/all_payment",{headers:{Authorization:i}});case 3:t=e.sent,r(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[i,n,r]),Object(f.jsx)("section",{children:Object(f.jsxs)("table",{className:"customers",children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"ID"}),Object(f.jsx)("th",{children:"DATE"}),Object(f.jsx)("th",{children:"TOTAL"}),Object(f.jsx)("th",{children:"PAID"}),Object(f.jsx)("th",{children:"DELIVERED"}),Object(f.jsx)("th",{children:"ACTIONS"})]})}),Object(f.jsx)("tbody",{children:s.map((function(t){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:t._id}),Object(f.jsx)("td",{children:t.createdAt.substring(0,10)}),Object(f.jsxs)("td",{children:["$",t.totalPrice]}),Object(f.jsx)("td",{children:t.isPaid?t.paidAt.substring(0,10):"No"}),Object(f.jsx)("td",{children:t.isDelivered?t.deliveredAt.substring(0,10):"No"}),Object(f.jsx)("td",{children:Object(f.jsx)("button",{className:"btn",onClick:function(){return e.history.push("/order/".concat(t._id))},children:"Details"})})]},t._id)}))})]})})}function oe(){var e=Object(c.useContext)(v),t=Object(u.a)(e.userAPI.isLogged,1)[0],a=Object(u.a)(e.userAPI.isAdmin,1)[0];return Object(f.jsxs)("main",{children:[Object(f.jsx)(w.a,{exact:!0,path:"/",component:a?te:re}),Object(f.jsx)(w.a,{path:"/signin",component:t?q:R}),Object(f.jsx)(w.a,{path:"/register",component:t?q:T}),Object(f.jsx)(w.a,{path:"/profile",component:t?se:q}),Object(f.jsx)(w.a,{path:"/cart",component:t?W:q}),Object(f.jsx)(w.a,{path:"/order/:id",component:t?ne:q}),Object(f.jsx)(w.a,{path:"/allorders",component:a?ie:q}),Object(f.jsx)(w.a,{path:"/edit_user/:id",component:a?ae:q}),Object(f.jsx)(w.a,{exact:!0,path:"/user/activate/:activation_token",component:t?q:A}),Object(f.jsx)(w.a,{exact:!0,path:"/forgot_password",component:t?q:D}),Object(f.jsx)(w.a,{exact:!0,path:"/create_product",component:a?K:q}),Object(f.jsx)(w.a,{exact:!0,path:"/edit_product/:id",component:a?K:q}),Object(f.jsx)(w.a,{exact:!0,path:"/category",component:a?G:q}),Object(f.jsx)(w.a,{exact:!0,path:"/user/reset/:token",component:t?q:F})]})}var je=function(){return Object(f.jsx)(g,{children:Object(f.jsx)(i.a,{children:Object(f.jsxs)("div",{className:"app",children:[Object(f.jsx)(N,{}),Object(f.jsx)(oe,{}),Object(f.jsx)(y,{})]})})})},le=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,77)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,n=t.getTTFB;a(e),c(e),s(e),r(e),n(e)}))};n.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(je,{})}),document.getElementById("root")),le()}},[[76,1,2]]]);
//# sourceMappingURL=main.196bc5a9.chunk.js.map